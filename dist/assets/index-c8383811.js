import{u as y,j as e,d as a,p as d,t as g,v as N,a as C,o as j,L as v,w as b,C as _,s as z,x as M,y as P,i as S}from"./index-218255ac.js";import{B as L}from"./Button-5d55b0d0.js";import{I as A}from"./InputNumber-57f92840.js";import{a as F,p as W}from"./Product-4abd52fc.js";function G({queryConfig:t}){const s=y(),r=h=>{s({pathname:d.home,search:g(N.omit({...t,rating_filter:String(h)},["page","order","price_min","price_max"])).toString()})};return e("ul",{className:"my-3",children:Array(5).fill(0).map((h,m)=>e("li",{className:"py-1 pl-2",children:a("div",{className:"flex items-center text-sm",role:"button",tabIndex:0,"aria-hidden":"true",onClick:()=>r(5-m),children:[Array(5).fill(0).map((x,o)=>o<5-m?a("svg",{viewBox:"0 0 9.5 8",className:"mr-1 h-4 w-4",children:[a("defs",{children:[a("linearGradient",{id:"ratingStarGradient",x1:"50%",x2:"50%",y1:"0%",y2:"100%",children:[e("stop",{offset:0,stopColor:"#ffca11"}),e("stop",{offset:1,stopColor:"#ffad27"})]}),e("polygon",{id:"ratingStar",points:"14.910357 6.35294118 12.4209136 7.66171903 12.896355 4.88968305 10.8823529 2.92651626 13.6656353 2.52208166 14.910357 0 16.1550787 2.52208166 18.9383611 2.92651626 16.924359 4.88968305 17.3998004 7.66171903"})]}),e("g",{fill:"url(#ratingStarGradient)",fillRule:"evenodd",stroke:"none",strokeWidth:1,children:e("g",{transform:"translate(-876 -1270)",children:e("g",{transform:"translate(155 992)",children:e("g",{transform:"translate(600 29)",children:e("g",{transform:"translate(10 239)",children:e("g",{transform:"translate(101 10)",children:e("use",{stroke:"#ffa727",strokeWidth:".5",xlinkHref:"#ratingStar"})})})})})})})]},o):a("svg",{viewBox:"0 0 30 30",className:"mr-1 h-4 w-4",children:[e("defs",{children:a("linearGradient",{id:"star__hollow",x1:"50%",x2:"50%",y1:"0%",y2:"99.0177926%",children:[e("stop",{offset:"0%",stopColor:"#FFD211"}),e("stop",{offset:"100%",stopColor:"#FFAD27"})]})}),e("path",{fill:"none",fillRule:"evenodd",stroke:"url(#star__hollow)",strokeWidth:2,d:"M23.226809 28.390899l-1.543364-9.5505903 6.600997-6.8291523-9.116272-1.4059447-4.01304-8.63019038-4.013041 8.63019038-9.116271 1.4059447 6.600997 6.8291523-1.543364 9.5505903 8.071679-4.5038874 8.071679 4.5038874z"})]},o)),m!==0&&e("span",{children:"trở lên"})]})},m))})}const R=z.pick(["price_min","price_max"]);function D({queryConfig:t,categories:s}){var k;const{category:r}=t,h=y(),{control:m,handleSubmit:x,watch:o,trigger:u,formState:{errors:w}}=C({defaultValues:{price_min:"",price_max:""},resolver:j(R),shouldFocusError:!1}),n=()=>{h({pathname:d.home,search:g(N.omit({...t},["price_min","price_max","rating_filter","category","page"])).toString()})},i=x(l=>{h({pathname:d.home,search:g(N.omit({...t,price_max:l.price_max,price_min:l.price_min},["page","order"])).toString()})});return a("div",{className:"py-4",children:[a(v,{to:d.home,className:"flex items-center font-bold",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5 fill-current",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),e("span",{className:"ml-2 capitalize",children:"Tất cả danh mục"})]}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),e("ul",{children:s.map(l=>{const f=r===l._id;return e("li",{className:" py-2 pl-2",children:a(v,{to:{pathname:d.home,search:g({...t,category:l._id}).toString()},className:b("relative px-2 text-sm ",{"font-semibold text-orange":f}),children:[f&&e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"absolute top-[50%] left-[-10px] h-3 w-3 translate-y-[-50%] border-orange fill-orange ",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})}),e("span",{children:l.name})]})},l._id)})}),a(v,{to:d.home,className:"mt-6 flex items-center font-bold uppercase",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-4 w-4",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})}),e("span",{className:"ml-2 capitalize",children:"Bộ lọc tìm kiếm"})]}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),a("div",{className:"my-5",children:[e("div",{className:"text-sm ",children:"Khoảng giá"}),a("form",{className:"mt-5",onSubmit:i,children:[a("div",{className:"flex items-start",children:[e(_,{name:"price_min",control:m,render:({field:l})=>e(A,{type:"text",className:"grow",placeholder:"₫ TỪ",classNameError:"hidden",classNameInput:"w-full rounded-sm border-[1px] border-gray-300 p-1 outline-none focus:border-gray-500 focus:shadow-sm",onChange:f=>{l.onChange(f),u("price_max")},value:l.value,ref:l.ref})}),e("div",{className:"mx-2 mt-2 shrink-0",children:"-"}),e(_,{control:m,name:"price_max",render:({field:l})=>e(A,{type:"text",className:"grow",placeholder:"₫ ĐẾN",classNameError:"hidden",onChange:f=>{l.onChange(f),u("price_min")},value:l.value,ref:l.ref,classNameInput:"w-full rounded-sm border-[1px] border-gray-300 p-1 outline-none focus:border-gray-500 focus:shadow-sm"})})]}),e("div",{className:"my-[4px] min-h-[1.25rem] text-center text-sm text-red-600",children:(k=w.price_min)==null?void 0:k.message}),e(L,{className:`flex w-full  items-center justify-center rounded-sm bg-orange p-2 
            text-sm uppercase text-white hover:bg-orange/80`,children:"Áp dụng"})]})]}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),e("div",{className:"text-sm",children:"Đánh giá"}),e(G,{queryConfig:t}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),e(L,{onClick:n,className:`flex w-full  items-center justify-center rounded-sm bg-orange p-2 
            text-sm uppercase text-white hover:bg-orange/0`,children:"Xoá tất cả"})]})}const c={createdAt:"createdAt",view:"view",sold:"sold",price:"price"},B={desc:"desc",asc:"asc"};function E({queryConfig:t,pageSize:s}){const r=Number(t.page),{sort_by:h=c.createdAt,order:m}=t,x=y(),o=n=>h===n,u=n=>{x({pathname:d.home,search:g(N.omit({...t,sort_by:n},["order"])).toString()})},w=n=>{x({pathname:d.home,search:g({...t,order:n,sort_by:c.price}).toString()})};return e("div",{className:"bg-gray-300/40 py-4 px-3",children:a("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a("div",{className:"flex flex-wrap items-center gap-3",children:[e("div",{children:"Sắp xếp theo"}),e("button",{className:b("h-8 rounded-sm  px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80 ":o(c.view),"bg-white text-black hover:bg-slate-100":!o(c.view)}),onClick:()=>u(c.view),children:"Phổ biến"}),e("button",{className:b("h-8 rounded-sm  px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80 ":o(c.createdAt),"bg-white text-black hover:bg-slate-100":!o(c.createdAt)}),onClick:()=>u(c.createdAt),children:"Mới nhất"}),e("button",{className:b("h-8 rounded-sm  px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80 ":o(c.sold),"bg-white text-black hover:bg-slate-100":!o(c.sold)}),onClick:()=>u(c.sold),children:"Bán chạy"}),a("select",{value:m||"",onChange:n=>w(n.target.value),className:b("h-8 rounded-sm bg-white px-4 text-left text-sm capitalize  outline-none ",{"text-orange hover:bg-slate-100":o(c.price),"text-black hover:bg-slate-100 ":!o(c.price)}),children:[e("option",{value:"",disabled:!0,children:"Giá"}),e("option",{value:B.asc,children:"Giá: Từ thấp đến cao"}),e("option",{value:B.desc,children:"Giá: Từ cao đến thấp"})]})]}),a("div",{className:"flex items-center gap-5",children:[a("div",{children:[e("span",{className:"text-orange",children:r}),a("span",{children:["/",s]})]}),a("div",{className:"ml-2 flex ",children:[r===1?e("span",{className:"flex h-8 w-9 cursor-not-allowed items-center  rounded-tl-sm rounded-bl-sm bg-white/60 px-3 shadow hover:bg-slate-100",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:" h-3 w-3 ",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}):e(v,{to:{pathname:d.home,search:g({...t,page:(r-1).toString()}).toString()},className:"flex h-8 w-9 cursor-pointer  items-center rounded-tl-sm rounded-bl-sm bg-white/60 px-3 shadow hover:bg-slate-100",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-3 w-3",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),r===s?e("span",{className:"flex h-8 w-9 cursor-not-allowed items-center rounded-tl-sm rounded-bl-sm bg-white/60 px-3 shadow hover:bg-slate-100",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-3 w-3",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}):e(v,{to:{pathname:d.home,search:g({...t,page:(r+1).toString()}).toString()},className:"flex h-8 w-9 cursor-pointer items-center rounded-tl-sm rounded-bl-sm bg-white/60 px-3 shadow hover:bg-slate-100",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-3 w-3",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})]})]})})}const p=2;function T({queryConfig:t,pageSize:s}){const r=Number(t.page),h=()=>{let m=!1,x=!1;const o=w=>x?null:(x=!0,e("span",{className:"mx-2 rounded border bg-white px-3 py-2 shadow-sm",children:"..."},w)),u=w=>m?null:(m=!0,e("span",{className:"mx-2  rounded border bg-white px-3 py-2 shadow-sm",children:"..."},w));return Array(s).fill(0).map((w,n)=>{const i=n+1;if(r<=p*2+1&&i>r+p&&i<s-p+1)return u(n);if(r>p*2+1&&r<s-p*2){if(i<r-p&&i>p)return o(n);if(i>r+p&&i<s-p+1)return u(n)}else if(r>=p*2&&i>p&&i<r-p)return o(n);return e(v,{to:{pathname:d.home,search:g({...t,page:i.toString()}).toString()},className:b("mx-2 cursor-pointer rounded border bg-white px-3 py-2 shadow-sm",{"border-cyan-500":i===r,"border-transparent":i!==r}),children:i},n)})};return a("div",{className:"mt-6 flex flex-wrap justify-center",children:[r===1?e("span",{className:"mx-2 cursor-not-allowed rounded border bg-white px-3 py-2 shadow-sm",children:"Previous"}):e(v,{to:{pathname:d.home,search:g({...t,page:(r-1).toString()}).toString()},className:"mx-2 cursor-pointer rounded border bg-white px-3 py-2 shadow-sm",children:"Previous"}),h(),r===s?e("span",{className:"mx-2 cursor-not-allowed rounded border bg-white px-3 py-2 shadow-sm",children:"Next"}):e(v,{to:{pathname:d.home,search:g({...t,page:(r+1).toString()}).toString()},className:"mx-2 cursor-pointer rounded border bg-white px-3 py-2 shadow-sm",children:"Next"})]})}const V="categories",H={getCategory(){return M.get(V)}},K=H;function U(){const t=P(),{data:s}=S({queryKey:["products",t],queryFn:()=>W.getProducts(t),keepPreviousData:!0,staleTime:3*60*1e3}),{data:r}=S({queryKey:["categories"],queryFn:()=>K.getCategory()});return e("div",{className:"bg-gray-200 py-6",children:e("div",{className:"container",children:s&&a("div",{className:"grid grid-cols-12 gap-6",children:[e("div",{className:"col-span-2",children:e(D,{queryConfig:t,categories:(r==null?void 0:r.data.data)||[]})}),a("div",{className:"col-span-10 ",children:[e(E,{queryConfig:t,pageSize:s.data.data.pagination.page_size}),e("div",{className:"mt-6 grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:s.data.data.products.map(h=>e("div",{className:"col-span-1",children:e(F,{product:h})},h._id))}),e(T,{queryConfig:t,pageSize:s.data.data.pagination.page_size})]})]})})})}export{U as default};
